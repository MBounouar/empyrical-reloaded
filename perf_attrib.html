
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Performance Attribution &#8212; empyrical 0.5.7+0.g19ade20.dirty documentation</title>

  <link href="_static/css/theme.css" rel="stylesheet" />
  <link href="_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />


  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">





    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />

  <link rel="preload" as="script" href="_static/js/index.1c5a1a01449ed65a7b51.js">

    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Utilities" href="utils.html" />
    <link rel="prev" title="Performance &amp; Risk Metrics" href="stats.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />

  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">

    <div class="container-fluid" id="banner"></div>


    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">


<a class="navbar-brand" href="index.html">
<p class="title">empyrical</p>
</a>


  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>


  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">

      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="stats.html">
  Performance &amp; Risk Metrics
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="current reference internal nav-link" href="#">
  Performance Attribution
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="utils.html">
  Utilities
 </a>
</li>


    <li class="nav-item">
        <a class="nav-link nav-external" href="https://ml4trading.io">ML for Trading<i class="fas fa-external-link-alt"></i></a>
    </li>

    <li class="nav-item">
        <a class="nav-link nav-external" href="https://exchange.ml4trading.io">Community<i class="fas fa-external-link-alt"></i></a>
    </li>

</ul>
      </div>

    </div>

    <div id="navbar-end">

      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/stefan-jansen/emyrical-reloaded" rel="noopener" target="_blank" title="GitHub">
            <span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://twitter.com/ml4trading" rel="noopener" target="_blank" title="Twitter">
            <span><i class="fab fa-twitter-square"></i></span>
            <label class="sr-only">Twitter</label>
          </a>
        </li>
      </ul>
      </div>

    </div>
  </div>
</div>
    </nav>


    <div class="container-xl">
      <div class="row">


            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar"><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">

  </div>
</nav>
            </div>




          <div class="d-none d-xl-block col-xl-2 bd-toc">


              <div class="toc-item">


<nav id="bd-toc-nav">

</nav>
              </div>

              <div class="toc-item">


<div class="tocsection editthispage">
    <a href="https://github.com/stefan-jansen/empyrical-reloaded/edit/main/docs/source/perf_attrib.rst">
        <i class="fas fa-pencil-alt"></i> Edit this page
    </a>
</div>

              </div>


          </div>






          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">

              <div>

  <div class="section" id="performance-attribution">
<span id="perf-attrib"></span><h1>Performance Attribution<a class="headerlink" href="#performance-attribution" title="Permalink to this headline">¶</a></h1>
<p>The module <a class="reference internal" href="#module-empyrical.perf_attrib" title="empyrical.perf_attrib"><code class="xref py py-mod docutils literal notranslate"><span class="pre">empyrical.perf_attrib</span></code></a> facilitates the attribution of performance to various risk factors.</p>
<span class="target" id="module-empyrical.perf_attrib"></span><dl class="py function">
<dt id="empyrical.perf_attrib.compute_exposures">
<code class="sig-prename descclassname"><span class="pre">empyrical.perf_attrib.</span></code><code class="sig-name descname"><span class="pre">compute_exposures</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">positions</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">factor_loadings</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#empyrical.perf_attrib.compute_exposures" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute daily risk factor exposures.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>positions: pd.Series</strong></dt><dd><p>A series of holdings as percentages indexed by date and ticker.
- Examples:</p>
<blockquote>
<div><p>dt          ticker
2017-01-01  AAPL      0.417582</p>
<blockquote>
<div><p>TLT       0.010989
XOM       0.571429</p>
</div></blockquote>
<dl class="simple">
<dt>2017-01-02  AAPL      0.202381</dt><dd><p>TLT       0.535714
XOM       0.261905</p>
</dd>
</dl>
</div></blockquote>
</dd>
<dt><strong>factor_loadings</strong><span class="classifier">pd.DataFrame</span></dt><dd><p>Factor loadings for all days in the date range, with date and ticker as
index, and factors as columns.
- Example:</p>
<blockquote>
<div><blockquote>
<div><p>momentum  reversal</p>
</div></blockquote>
<p>dt         ticker
2017-01-01 AAPL   -1.592914  0.852830</p>
<blockquote>
<div><p>TLT     0.184864  0.895534
XOM     0.993160  1.149353</p>
</div></blockquote>
<dl class="simple">
<dt>2017-01-02 AAPL   -0.140009 -0.524952</dt><dd><p>TLT    -1.066978  0.185435
XOM    -1.798401  0.761549</p>
</dd>
</dl>
</div></blockquote>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl>
<dt><strong>risk_exposures_portfolio</strong><span class="classifier">pd.DataFrame</span></dt><dd><p>df indexed by datetime, with factors as columns
- Example:</p>
<blockquote>
<div><blockquote>
<div><p>momentum  reversal</p>
</div></blockquote>
<p>dt
2017-01-01 -0.238655  0.077123
2017-01-02  0.821872  1.520515</p>
</div></blockquote>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="empyrical.perf_attrib.perf_attrib">
<code class="sig-prename descclassname"><span class="pre">empyrical.perf_attrib.</span></code><code class="sig-name descname"><span class="pre">perf_attrib</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">returns</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">positions</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">factor_returns</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">factor_loadings</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#empyrical.perf_attrib.perf_attrib" title="Permalink to this definition">¶</a></dt>
<dd><p>Attributes the performance of a returns stream to a set of risk factors.</p>
<p>Performance attribution determines how much each risk factor, e.g.,
momentum, the technology sector, etc., contributed to total returns, as
well as the daily exposure to each of the risk factors. The returns that
can be attributed to one of the given risk factors are the
<cite>common_returns</cite>, and the returns that _cannot_ be attributed to a risk
factor are the <cite>specific_returns</cite>. The <cite>common_returns</cite> and
<cite>specific_returns</cite> summed together will always equal the total returns.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>returns</strong><span class="classifier">pd.Series</span></dt><dd><p>Returns for each day in the date range.
- Example:</p>
<blockquote>
<div><p>2017-01-01   -0.017098
2017-01-02    0.002683
2017-01-03   -0.008669</p>
</div></blockquote>
</dd>
<dt><strong>positions: pd.Series</strong></dt><dd><p>Daily holdings in percentages, indexed by date.
- Examples:</p>
<blockquote>
<div><p>dt          ticker
2017-01-01  AAPL      0.417582</p>
<blockquote>
<div><p>TLT       0.010989
XOM       0.571429</p>
</div></blockquote>
<dl class="simple">
<dt>2017-01-02  AAPL      0.202381</dt><dd><p>TLT       0.535714
XOM       0.261905</p>
</dd>
</dl>
</div></blockquote>
</dd>
<dt><strong>factor_returns</strong><span class="classifier">pd.DataFrame</span></dt><dd><p>Returns by factor, with date as index and factors as columns
- Example:</p>
<blockquote>
<div><blockquote>
<div><p>momentum  reversal</p>
</div></blockquote>
<p>2017-01-01  0.002779 -0.005453
2017-01-02  0.001096  0.010290</p>
</div></blockquote>
</dd>
<dt><strong>factor_loadings</strong><span class="classifier">pd.DataFrame</span></dt><dd><p>Factor loadings for all days in the date range, with date and ticker as
index, and factors as columns.
- Example:</p>
<blockquote>
<div><blockquote>
<div><p>momentum  reversal</p>
</div></blockquote>
<p>dt         ticker
2017-01-01 AAPL   -1.592914  0.852830</p>
<blockquote>
<div><p>TLT     0.184864  0.895534
XOM     0.993160  1.149353</p>
</div></blockquote>
<dl class="simple">
<dt>2017-01-02 AAPL   -0.140009 -0.524952</dt><dd><p>TLT    -1.066978  0.185435
XOM    -1.798401  0.761549</p>
</dd>
</dl>
</div></blockquote>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl>
<dt>tuple of (risk_exposures_portfolio, perf_attribution)</dt><dd></dd>
<dt><strong>risk_exposures_portfolio</strong><span class="classifier">pd.DataFrame</span></dt><dd><p>df indexed by datetime, with factors as columns
- Example:</p>
<blockquote>
<div><blockquote>
<div><p>momentum  reversal</p>
</div></blockquote>
<p>dt
2017-01-01 -0.238655  0.077123
2017-01-02  0.821872  1.520515</p>
</div></blockquote>
</dd>
<dt><strong>perf_attribution</strong><span class="classifier">pd.DataFrame</span></dt><dd><p>df with factors, common returns, and specific returns as columns,
and datetimes as index
- Example:</p>
<blockquote>
<div><blockquote>
<div><p>momentum  reversal  common_returns  specific_returns</p>
</div></blockquote>
<p>dt
2017-01-01  0.249087  0.935925        1.185012          1.185012
2017-01-02 -0.003194 -0.400786       -0.403980         -0.403980</p>
</div></blockquote>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</div>


              </div>


              <div class='prev-next-bottom'>

    <a class='left-prev' id="prev-link" href="stats.html" title="previous page">Performance &amp; Risk Metrics</a>
    <a class='right-next' id="next-link" href="utils.html" title="next page">Utilities</a>

              </div>

          </main>


      </div>
    </div>

  <script src="_static/js/index.1c5a1a01449ed65a7b51.js"></script>



    <!-- Google Analytics -->
    <script>
      window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
      ga('create', 'UA-74956955-3', 'auto');
      ga('set', 'anonymizeIp', true);
      ga('send', 'pageview');
    </script>
    <script async src='https://www.google-analytics.com/analytics.js'></script>
    <!-- End Google Analytics -->
    <footer class="footer mt-5 mt-md-0">
  <div class="container">

    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2016, Quantopian, Inc..<br/>
</p>
    </div>

    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.5.4.<br/>
</p>
    </div>

  </div>
</footer>
  </body>
</html>
